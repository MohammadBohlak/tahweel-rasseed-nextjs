"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{3193:function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useLoader",{enumerable:!0,get:()=>c});let n=s(7294);function c(){let[e,t]=(0,n.useState)("hidden");return{loader:e,setLoader:t}}e.exports={useLoader:c}},8312:function(e,t,s){s.r(t);var n=s(5893);s(7294);let c=e=>{let{visible:t,children:s}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:"https://my.syriatel.sy/images/logo.png",style:{width:"calc(100vw - 40px)"}}),(0,n.jsx)("div",{className:"loader",style:{visibility:"".concat(t)}}),s]})};t.default=c},2340:function(e,t,s){s.r(t),s.d(t,{default:function(){return u},getCost:function(){return j},getPrice:function(){return x},url:function(){return o}});var n=s(5893),c=s(3556),l=s(7066),i=s(1664),a=s.n(i),r=s(7294),d=s(8312),h=s(3193);let o="https://alaa-project.vercel.app",x=e=>1.25*e,j=e=>1.043*e;function u(){let{loader:e,setLoader:t}=(0,h.useLoader)(),[s,i]=(0,r.useState)(""),[x,j]=(0,c.cI)("mqazogok");x.succeeded&&alert("تم الارسال بنجاح");let[u,m]=(0,r.useState)([]),b=()=>{t("visible"),l.Z.get("".concat(o,"/api/posts")).then(e=>{m(e.data.sort((e,t)=>{let s=e.name,n=t.name;return s<n?-1:s>n?1:0}))}).finally(()=>{t("hidden")})};async function p(e){window.confirm("هل أنت متأكد من حذف بيانات ".concat(e.name,"  ؟"))&&(t("visible"),l.Z.delete("".concat(o,"/api/posts/").concat(e._id)).then(()=>{b()}).finally(()=>{t("hidden")}))}(0,r.useEffect)(()=>{b()},[]);let f=Object.values(u.reduce((e,t)=>(e[t.name]?(e[t.name].value+=t.value,e[t.name].price+=t.price,e[t.name].cost+=t.cost):e[t.name]={_id:t._id,name:t.name,value:t.value,price:t.price,cost:t.cost},e),{})),v="";u.map(e=>(v+="\n    الاسم : ".concat(e.name," \n    قيمة الرصيد : ").concat(e.value," \n    السعر: ").concat(e.price,"\n    التاريخ : ").concat(e.date,"\n    ")+"\n",e));let N=0,y=0,g=0,k="";f.map(e=>(k+="\n        الاسم : ".concat(e.name," \n        المبلغ الكلي: ").concat(e.price,"\n        ")+"\n",N+=e.price,y+=e.cost,g+=e.value,e));let _=f.length,[C,w]=(0,r.useState)(""),[F,E]=(0,r.useState)("abuomarcom4@gmail.com");function S(e){if(confirm("هل انت متأكد من حذف جميع بيانات ".concat(e.name))){let t=u.filter(t=>e.name==t.name);console.log(t),t.forEach(e=>{l.Z.delete("".concat(o,"/api/posts/").concat(e._id)).then(()=>{b()})})}}u.filter(e=>"رمضان علوش"!=e.name);let O=f.map((e,t)=>{if(""!=s&&e.name.includes(s))return(0,n.jsxs)("tr",{style:{color:"black"},children:[(0,n.jsx)("td",{children:t+1}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:Number(e.price).toFixed(0)}),(0,n.jsx)("td",{className:"actions-buttons",children:(0,n.jsx)("button",{className:"del-btn",onClick:()=>{S(e),i("")},children:"حذف"})})]},t)});return(0,n.jsxs)(d.default,{visible:e,children:[(0,n.jsxs)("div",{className:"add-customer",children:[(0,n.jsx)("div",{children:(0,n.jsx)(a(),{href:"/customers/addcustomer",children:(0,n.jsx)("button",{className:"add-value-btn",children:"إضافة زبون من حيث الرصيد"})})}),(0,n.jsx)("div",{children:(0,n.jsx)(a(),{href:"/customers/add-customer-money",children:(0,n.jsx)("button",{className:"add-cost-btn",children:"إضافة زبون من حيث المبلغ"})})})]}),(0,n.jsx)("div",{className:"search",children:(0,n.jsx)("input",{type:"search",placeholder:"بحث",value:s,onChange:e=>{i(e.target.value)}})}),""!=s&&(0,n.jsxs)("table",{className:"search-table",dir:"rtl",children:[(0,n.jsx)("caption",{className:"title-search-table title-table",children:"جدول البحث"}),(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"م"}),(0,n.jsx)("th",{children:"الاسم"}),(0,n.jsx)("th",{children:"السعر"}),(0,n.jsx)("th",{children:" "})]})}),(0,n.jsx)("tbody",{children:O})]}),(0,n.jsx)("h3",{className:"title-table",children:"جدول الإحصائيات"}),(0,n.jsxs)("table",{className:"table-customers",dir:"rtl",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"head-table",children:[(0,n.jsx)("th",{children:"م"}),(0,n.jsx)("th",{children:"الاسم"}),(0,n.jsx)("th",{children:"قيمة الرصيد"}),(0,n.jsx)("th",{children:"السعر"}),(0,n.jsx)("th",{children:"التكلفة"}),(0,n.jsx)("th",{})]})}),(0,n.jsx)("tbody",{children:f.map((e,t)=>(0,n.jsxs)("tr",{style:{color:"black"},children:[(0,n.jsx)("td",{style:{background:"var(--add-color)",color:"white",borderColor:"white"},children:t+1}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.value}),(0,n.jsx)("td",{children:Number(e.price).toFixed(0)}),(0,n.jsx)("td",{children:Number(e.cost).toFixed(0)}),(0,n.jsx)("td",{style:{height:"100%"},className:"actions-buttons",children:(0,n.jsx)("button",{className:"del-btn",onClick:()=>{S(e)},children:"حذف"})})]},t))})]}),(0,n.jsxs)("table",{className:"table-total",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:" "}),(0,n.jsx)("th",{children:" عدد الزبائن"}),(0,n.jsx)("th",{children:" الرصيد"}),(0,n.jsx)("th",{children:" الديون"}),(0,n.jsx)("th",{children:" الكلفة"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{background:"var(--add-color)",color:"white"},children:"المجموع"}),(0,n.jsx)("td",{children:_}),(0,n.jsx)("td",{children:g}),(0,n.jsx)("td",{children:N}),(0,n.jsx)("td",{children:y.toFixed(0)})]})})]}),(0,n.jsxs)("table",{className:"table-customers",dir:"rtl",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"head-table",children:[(0,n.jsx)("th",{children:"الاسم"}),(0,n.jsx)("th",{children:"قيمة الرصيد"}),(0,n.jsx)("th",{children:"السعر"}),(0,n.jsx)("th",{children:"التكلفة"}),(0,n.jsx)("th",{children:"التاريخ"}),(0,n.jsx)("th",{children:"الحدث المراد"})]})}),(0,n.jsx)("tbody",{children:u.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.value}),(0,n.jsx)("td",{children:e.price.toFixed(0)}),(0,n.jsx)("td",{children:e.cost.toFixed(0)}),(0,n.jsx)("td",{children:e.date}),(0,n.jsxs)("td",{className:"actions-buttons",children:[(0,n.jsx)("button",{onClick:()=>{p(e)},children:"حذف"}),(0,n.jsx)(a(),{href:"/customers/edit/".concat(e._id),children:(0,n.jsx)("button",{className:"edit-btn",children:"تعديل"})}),(0,n.jsx)(a(),{href:"/customers/add/".concat(e._id),children:(0,n.jsx)("button",{className:"add-btn",children:"إضافة رصيد"})}),(0,n.jsx)(a(),{href:"/customers/addcost/".concat(e._id),children:(0,n.jsx)("button",{className:"add-cost-btn",children:"إضافة مبلغ"})})]})]},e._id))})]}),(0,n.jsxs)("form",{onSubmit:j,className:"gmail-form",children:[(0,n.jsxs)("div",{className:"desc-buttons",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{w(v)},children:"إرسال كامل البيانات"}),(0,n.jsx)("button",{type:"button",onClick:()=>{w(k)},children:"إرسال البيانات الإحصائية فقط"})]}),(0,n.jsxs)("div",{style:{position:"absolute",visibility:"hidden"},children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,n.jsx)("input",{id:"email",type:"email",name:"email",value:F,onChange:()=>{}}),(0,n.jsx)(c.p8,{prefix:"Email",field:"email",errors:x.errors})]}),(0,n.jsx)("div",{className:"cotainer-textarea",children:(0,n.jsx)("textarea",{id:"message",name:"message",value:C,onChange:e=>{w(e.target.value)}})}),(0,n.jsx)(c.p8,{prefix:"Message",field:"message",errors:x.errors}),(0,n.jsx)("div",{className:"container-submit-btn",children:(0,n.jsx)("button",{id:"submitGmailBtn",type:"submit",disabled:x.submitting,children:"إرسال"})})]})]})}}}]);